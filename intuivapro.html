<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
      <link rel="icon" href="images/tempest.png" type="image/x-icon">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Intuiva Pro ‚Äì Secure Payment</title>

  <!-- Brand Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #071E22;
      --card: #0A2C33;
      --heading: #E3F6F5;
      --text: #C0D8D8;
      --accent: #49D6E9;
      --accent-dark: #3ABACD;
      --radius: 12px;
      --shadow: 0 8px 24px rgba(0,0,0,0.4);
    }

    html, body {
      margin: 0;
      padding: 48px 24px;
      background: var(--bg);
      color: var(--text);
      font-family: 'Inter', system-ui, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      min-height: 100vh;
    }

    .nav-links {
      display: flex;
      gap: 20px;
      margin-bottom: 30px;
    }

    .nav-links a {
      color: var(--accent);
      text-decoration: none;
      font-weight: 600;
      padding: 8px 16px;
      border-radius: var(--radius);
      transition: all 0.3s;
    }

    .nav-links a:hover {
      background: rgba(73, 214, 233, 0.1);
    }

    .language-selector {
      margin-bottom: 30px;
    }

    .language-selector button {
      background: none;
      border: none;
      color: var(--text);
      padding: 8px 12px;
      margin: 0 5px;
      cursor: pointer;
      border-radius: var(--radius);
      transition: all 0.3s;
    }

    .language-selector button.active {
      background: var(--accent);
      color: var(--bg);
      font-weight: 600;
    }

    .language-selector button:hover:not(.active) {
      background: rgba(73, 214, 233, 0.2);
    }

    input[type="email"] {
      padding: 12px;
      font-size: 1rem;
      border-radius: var(--radius);
      border: none;
      width: 100%;
      max-width: 420px;
      margin-bottom: 20px;
      box-shadow: var(--shadow);
      background: var(--card);
      color: var(--text);
    }

    img.hero-image {
      width: 160px;
      height: auto;
      margin-bottom: 24px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }

    h1 {
      font-family: "Playfair Display", serif;
      color: var(--heading);
      font-size: 2.5rem;
      margin: 12px 0 24px;
    }

    p {
      font-size: 1.1rem;
      max-width: 700px;
      margin-bottom: 24px;
      line-height: 1.6;
    }

    .exchange-note {
      font-size: 0.9rem;
      color: #88A9A8;
      margin-bottom: 32px;
      max-width: 480px;
    }

    #pay-button, #pay-button-tr, #pay-button-de {
      background: var(--accent);
      color: var(--bg);
      border: none;
      border-radius: var(--radius);
      padding: 16px 36px;
      font-size: 1.15rem;
      font-weight: 600;
      cursor: pointer;
      box-shadow: var(--shadow);
      transition: 0.3s all;
      margin-bottom: 0;
    }

    #pay-button:hover, #pay-button-tr:hover, #pay-button-de:hover {
      background: var(--accent-dark);
      transform: translateY(-2px);
    }

    .payment-failed-btn {
      background: transparent;
      color: var(--accent);
      border: 1px solid var(--accent);
      border-radius: var(--radius);
      padding: 12px 24px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s all;
      margin-top: 10px;
    }

    .payment-failed-btn:hover {
      background: rgba(73, 214, 233, 0.1);
    }

    #paytr-iframe, #paytr-iframe-tr, #paytr-iframe-de {
      margin-top: 36px;
      width: 100%;
      max-width: 820px;
      height: 620px;
      border: none;
      border-radius: var(--radius);
      display: none;
      box-shadow: var(--shadow);
    }

    #status, #status-tr, #status-de {
      margin-top: 24px;
      font-size: 1rem;
      color: var(--text);
    }

    .info-section {
      background: var(--card);
      padding: 32px;
      margin-top: 48px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      text-align: left;
      max-width: 820px;
    }

    .info-section h2 {
      font-family: "Playfair Display", serif;
      color: var(--heading);
      font-size: 1.6rem;
      margin-bottom: 16px;
    }

    .info-section ul {
      padding-left: 20px;
      font-size: 1rem;
      line-height: 1.6;
    }

    .info-section li {
      margin-bottom: 12px;
    }

    .loader {
      border: 4px solid rgba(255,255,255,0.15);
      border-top: 4px solid var(--accent);
      border-radius: 50%;
      width: 28px;
      height: 28px;
      animation: spin 0.9s linear infinite;
      display: inline-block;
      margin-right: 10px;
      vertical-align: middle;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    #loading-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(7,30,34,0.95);
      color: var(--text);
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      text-align: center;
      padding: 20px;
    }

    #loading-overlay .loader {
      width: 48px;
      height: 48px;
      margin-bottom: 20px;
    }

    #loading-overlay p {
      font-size: 1.2rem;
      max-width: 300px;
      line-height: 1.6;
    }

    .hidden {
      display: none;
    }
    
    .payment-options {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      justify-content: center;
      width: 100%;
      max-width: 500px;
    }
    
    .alternative-payment {
      background: #1E3A40;
      color: var(--text);
      border: none;
      border-radius: var(--radius);
      padding: 16px 36px;
      font-size: 1.15rem;
      font-weight: 600;
      cursor: pointer;
      box-shadow: var(--shadow);
      transition: 0.3s all;
      flex: 1;
      min-width: 200px;
    }
    
    .alternative-payment:hover {
      background: #2A4B52;
      transform: translateY(-2px);
    }
    
    .main-payment-btn {
      flex: 1;
      min-width: 200px;
    }
    
    .payment-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
    }
  </style>
</head>

<body>

  <div id="loading-overlay">
    <div class="loader"></div>
    <p id="loading-text">Processing your payment...<br>Please wait a moment üöÄ‚ú®</p>
  </div>

  <div class="nav-links">
    <a href="https://tempestlabs.space/">üè† Homepage</a>
    <a href="https://tempestlabs.space/product-intuiva.html">üì¶ Product Page</a>
  </div>

  <div class="language-selector">
    <button id="lang-en" class="active">English</button>
    <button id="lang-tr">T√ºrk√ße</button>
    <button id="lang-de">Deutsch</button>
  </div>

  <!-- English Content -->
  <div id="content-en" class="language-content">
    <h1>Activate Intuiva Pro Plan</h1>
    <p>Click the button below to open a secure checkout and unlock Intuiva's full project management power.</p>
    <div class="exchange-note">
      üí¨ Your card will be charged in Turkish Lira (‚Ç∫), based on the latest exchange rates (approx. 1 USD ‚âà 32-33 TRY).
    </div>
    <p>Start by entering your email.</p>
    <input type="email" id="email-input" placeholder="Enter your email" />
    
    <div class="payment-container">
      <div class="payment-options">
        <button id="pay-button" class="main-payment-btn">üí≥ Pay $24.99</button>
        <button class="alternative-payment" onclick="window.location.href='https://tempestlabs.space/failprointuiva.html'">
          üåç Alternative Payment
        </button>
      </div>
      
      <button class="payment-failed-btn" onclick="window.location.href='https://tempestlabs.space/failprointuiva.html'">
        If you could not make the payment
      </button>
      <div id="status"></div>
      <iframe id="paytr-iframe" title="Secure PayTR Checkout"></iframe>
    </div>

    <div class="info-section">
      <h2>üõ†Ô∏è What Happens After Payment</h2>
      <ul>
        <li>Click the <strong>Pay $24.99</strong> button above.</li>
        <li>A secure checkout window from our partner PayTR will appear.</li>
        <li>Fill in your card details and complete your transaction securely.</li>
        <li>After payment, you will be redirected automatically to your activation page.</li>
      </ul>

      <h2 style="margin-top:32px;">üì± Install Intuiva as an App</h2>
      <ul>
        <li><strong>iPhone (Safari):</strong> Tap the <em>Share</em> icon and select <strong>"Add to Home Screen"</strong>.</li>
        <li><strong>Android (Chrome):</strong> Tap the three dots, then select <strong>"Install App"</strong>.</li>
        <li><strong>Desktop (Chrome/Edge):</strong> Click the install icon in the address bar to add Intuiva to your device.</li>
      </ul>

      <p style="margin-top:24px;font-size:0.95rem;color:#88A9A8;">
        üõ°Ô∏è Some browsers might show a warning about apps outside official stores ‚Äî this is normal. Intuiva is fully secure and private.
      </p>

      <p style="margin-top:20px;font-size:0.95rem;color:#88A9A8;">
        üïØÔ∏è Need help? Reach out anytime. We are here to support your journey toward simpler, smarter projects.
      </p>
    </div>
  </div>

  <!-- Turkish Content -->
  <div id="content-tr" class="language-content hidden">
    <h1>Intuiva Pro Planƒ±nƒ± Etkinle≈ütir</h1>
    <p>A≈üaƒüƒ±daki butona tƒ±klayarak g√ºvenli √∂deme sayfasƒ±nƒ± a√ßƒ±n ve Intuiva'nƒ±n proje y√∂netim g√ºc√ºn√ºn kilidini a√ßƒ±n.</p>
    <div class="exchange-note">
      üí¨ Kartƒ±nƒ±za son d√∂viz kurlarƒ±na g√∂re T√ºrk Lirasƒ± (‚Ç∫) cinsinden i≈ülem yapƒ±lacaktƒ±r (yakla≈üƒ±k 1 USD ‚âà 32-33 TRY).
    </div>
    <input type="email" id="email-input-tr" placeholder="E-posta adresinizi girin" />
    
    <div class="payment-container">
      <div class="payment-options">
        <button id="pay-button-tr" class="main-payment-btn">üí≥ $24.99 √ñde</button>
        <button class="alternative-payment" onclick="window.location.href='https://tempestlabs.space/failprointuiva.html'">
          üåç Alternatif √ñdeme
        </button>
      </div>
      
      <button class="payment-failed-btn" onclick="window.location.href='https://tempestlabs.space/failprointuiva.html'">
        √ñdeme yapamadƒ±ysanƒ±z
      </button>
      <div id="status-tr"></div>
      <iframe id="paytr-iframe-tr" title="G√ºvenli PayTR √ñdeme"></iframe>
    </div>

    <div class="info-section">
      <h2>üõ†Ô∏è √ñdeme Sonrasƒ± S√ºre√ß</h2>
      <ul>
        <li>Yukarƒ±daki <strong>$24.99 √ñde</strong> butonuna tƒ±klayƒ±n.</li>
        <li>PayTR i≈ü ortaƒüƒ±mƒ±zƒ±n g√ºvenli √∂deme sayfasƒ± a√ßƒ±lacaktƒ±r.</li>
        <li>Kart bilgilerinizi girerek i≈üleminizi g√ºvenle tamamlayƒ±n.</li>
        <li>√ñdeme sonrasƒ±nda otomatik olarak aktivasyon sayfanƒ±za y√∂nlendirileceksiniz.</li>
      </ul>

      <h2 style="margin-top:32px;">üì± Intuiva'yƒ± Uygulama Olarak Y√ºkle</h2>
      <ul>
        <li><strong>iPhone (Safari):</strong> <em>Payla≈ü</em> ikonuna dokunun ve <strong>"Ana Ekrana Ekle"</strong> se√ßeneƒüini se√ßin.</li>
        <li><strong>Android (Chrome):</strong> √ú√ß noktaya dokunun ve <strong>"Uygulamayƒ± Y√ºkle"</strong> se√ßeneƒüini se√ßin.</li>
        <li><strong>Masa√ºst√º (Chrome/Edge):</strong> Adres √ßubuƒüundaki y√ºkleme ikonuna tƒ±klayarak Intuiva'yƒ± cihazƒ±nƒ±za ekleyin.</li>
      </ul>

      <p style="margin-top:24px;font-size:0.95rem;color:#88A9A8;">
        üõ°Ô∏è Bazƒ± tarayƒ±cƒ±lar resmi maƒüazalar dƒ±≈üƒ±ndaki uygulamalar hakkƒ±nda uyarƒ± g√∂sterebilir ‚Äî bu normaldir. Intuiva tamamen g√ºvenli ve √∂zeldir.
      </p>

      <p style="margin-top:20px;font-size:0.95rem;color:#88A9A8;">
        üïØÔ∏è Yardƒ±ma ihtiyacƒ±nƒ±z mƒ± var? Daha basit, daha akƒ±llƒ± projeler yolculuƒüunuzda destek olmak i√ßin her zaman buradayƒ±z.
      </p>
    </div>
  </div>

  <!-- German Content -->
  <div id="content-de" class="language-content hidden">
    <h1>Aktivieren Sie den Intuiva Pro Plan</h1>
    <p>Klicken Sie auf die Schaltfl√§che unten, um eine sichere Kasse zu √∂ffnen und die volle Projektmanagement-Power von Intuiva freizuschalten.</p>
    <div class="exchange-note">
      üí¨ Ihre Karte wird in t√ºrkischen Lira (‚Ç∫) belastet, basierend auf den aktuellen Wechselkursen (ca. 1 USD ‚âà 32-33 TRY).
    </div>
    <input type="email" id="email-input-de" placeholder="Geben Sie Ihre E-Mail-Adresse ein" />
    
    <div class="payment-container">
      <div class="payment-options">
        <button id="pay-button-de" class="main-payment-btn">üí≥ $24.99 Zahlen</button>
        <button class="alternative-payment" onclick="window.location.href='https://tempestlabs.space/failprointuiva.html'">
          üåç Alternative Zahlung
        </button>
      </div>
      
      <button class="payment-failed-btn" onclick="window.location.href='https://tempestlabs.space/failprointuiva.html'">
        Falls Sie keine Zahlung vornehmen konnten
      </button>
      <div id="status-de"></div>
      <iframe id="paytr-iframe-de" title="Sicheres PayTR Checkout"></iframe>
    </div>

    <div class="info-section">
      <h2>üõ†Ô∏è Was passiert nach der Zahlung</h2>
      <ul>
        <li>Klicken Sie auf die Schaltfl√§che <strong>$24.99 Zahlen</strong> oben.</li>
        <li>Es erscheint ein sicheres Checkout-Fenster unseres Partners PayTR.</li>
        <li>Geben Sie Ihre Kartendaten ein und schlie√üen Sie Ihre Transaktion sicher ab.</li>
        <li>Nach der Zahlung werden Sie automatisch zu Ihrer Aktivierungsseite weitergeleitet.</li>
      </ul>

      <h2 style="margin-top:32px;">üì± Installieren Sie Intuiva als App</h2>
      <ul>
        <li><strong>iPhone (Safari):</strong> Tippen Sie auf das <em>Teilen</em>-Symbol und w√§hlen Sie <strong>"Zum Home-Bildschirm"</strong>.</li>
        <li><strong>Android (Chrome):</strong> Tippen Sie auf die drei Punkte und w√§hlen Sie <strong>"App installieren"</strong>.</li>
        <li><strong>Desktop (Chrome/Edge):</strong> Klicken Sie auf das Installationssymbol in der Adressleiste, um Intuiva zu Ihrem Ger√§t hinzuzuf√ºgen.</li>
      </ul>

      <p style="margin-top:24px;font-size:0.95rem;color:#88A9A8;">
        üõ°Ô∏è Einige Browser zeigen m√∂glicherweise eine Warnung zu Apps au√üerhalb offizieller Stores an ‚Äî das ist normal. Intuiva ist vollst√§ndig sicher und privat.
      </p>

      <p style="margin-top:20px;font-size:0.95rem;color:#88A9A8;">
        üïØÔ∏è Brauchen Sie Hilfe? Melden Sie sich jederzeit. Wir sind hier, um Sie auf Ihrer Reise zu einfacheren, intelligenteren Projekten zu unterst√ºtzen.
      </p>
    </div>
  </div>

  <script>
    // Language switching functionality
    document.getElementById('lang-en').addEventListener('click', function() {
      setActiveLanguage('en');
    });
    document.getElementById('lang-tr').addEventListener('click', function() {
      setActiveLanguage('tr');
    });
    document.getElementById('lang-de').addEventListener('click', function() {
      setActiveLanguage('de');
    });

    function setActiveLanguage(lang) {
      // Update button states
      document.querySelectorAll('.language-selector button').forEach(btn => {
        btn.classList.remove('active');
      });
      document.getElementById(`lang-${lang}`).classList.add('active');
      
      // Show selected language content
      document.querySelectorAll('.language-content').forEach(content => {
        content.classList.add('hidden');
      });
      document.getElementById(`content-${lang}`).classList.remove('hidden');
    }

    // Payment functionality for each language
    function setupPayment(lang) {
      const payButton = document.getElementById(`pay-button-${lang}`) || document.getElementById('pay-button');
      const iframe = document.getElementById(`paytr-iframe-${lang}`) || document.getElementById('paytr-iframe');
      const status = document.getElementById(`status-${lang}`) || document.getElementById('status');
      const loadingOverlay = document.getElementById("loading-overlay");
      const loadingText = document.getElementById("loading-text");
      const emailInput = document.getElementById(`email-input-${lang}`) || document.getElementById('email-input');

      if (!payButton) return;

      payButton.addEventListener("click", async () => {
        const email = emailInput.value.trim();
        if (!email || !email.includes("@")) {
          status.textContent = lang === 'tr' ? "‚ö†Ô∏è L√ºtfen ge√ßerli bir e-posta adresi girin." : 
                             lang === 'de' ? "‚ö†Ô∏è Bitte geben Sie eine g√ºltige E-Mail-Adresse ein." :
                             "‚ö†Ô∏è Please enter a valid email address.";
          return;
        }

        iframe.style.display = "none";
        status.innerHTML = lang === 'tr' ? '<span class="loader"></span>G√ºvenli √∂deme baƒülantƒ±sƒ± isteniyor...' :
                          lang === 'de' ? '<span class="loader"></span>Sicherer Zahlungslink wird angefordert...' :
                          '<span class="loader"></span>Requesting secure payment link...';

        try {
          loadingOverlay.style.display = "flex";
          loadingText.textContent = lang === 'tr' ? '√ñdemeniz i≈üleniyor...\nL√ºtfen bir dakika bekleyin üöÄ‚ú®' :
                                lang === 'de' ? 'Ihre Zahlung wird verarbeitet...\nBitte warten Sie einen Moment üöÄ‚ú®' :
                                'Processing your payment...\nPlease wait a moment üöÄ‚ú®';

          const response = await fetch("https://prointuivapay-production.up.railway.app/paytr-init", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              email: email,
              price: "24.99",
              user_name: "Ilke",
              user_address: "Imaginary Street No. 42, Istanbul",
              user_phone: "05555555555"
            })
          });

          const data = await response.json();
          loadingOverlay.style.display = "none";

          if (data.token_url) {
            iframe.src = data.token_url;
            iframe.style.display = "block";
            status.textContent = lang === 'tr' ? "‚úÖ G√ºvenli √∂deme y√ºklendi. L√ºtfen i≈üleminizi a≈üaƒüƒ±dan tamamlayƒ±n." :
                              lang === 'de' ? "‚úÖ Sichere Zahlung geladen. Bitte schlie√üen Sie Ihre Transaktion unten ab." :
                              "‚úÖ Secure payment loaded. Please complete your transaction below.";
          } else {
            status.textContent = lang === 'tr' ? "‚ö†Ô∏è √ñdeme baƒülantƒ±sƒ± olu≈üturulamadƒ±." :
                                lang === 'de' ? "‚ö†Ô∏è Zahlungslink konnte nicht generiert werden." :
                                "‚ö†Ô∏è Failed to generate payment link.";
            console.error("Error response:", data);
          }
        } catch (err) {
          loadingOverlay.style.display = "none";
          status.textContent = lang === 'tr' ? "üö® Hata: " + err.message :
                              lang === 'de' ? "üö® Fehler: " + err.message :
                              "üö® Error: " + err.message;
          console.error("Request error:", err);
        }
      });
    }

    // Initialize payment for all languages
    setupPayment('en');
    setupPayment('tr');
    setupPayment('de');
  </script>

</body>
</html>
